<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Rabika's Burguer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
    background:linear-gradient(180deg,#06003a 0%,#0a045a 50%,#03001f 100%);
    font-family:Arial,Helvetica,sans-serif;
    color:#fff;
    display:flex;
    justify-content:center;
    overflow-y:auto;
}

/* SPLASH */
#splashScreen{
    position:fixed;inset:0;
    background:linear-gradient(180deg,#06003a,#03001f);
    display:flex;justify-content:center;align-items:center;
    z-index:9999;
}
.splash-content{
    width:100%;height:100%;
    display:flex;flex-direction:column;
    justify-content:center;align-items:center;
    gap:30px;
}
.splash-logo{width:90vw;max-width:420px}
.splash-btn{
    background:linear-gradient(135deg,#FFD34D,#FFB000);
    border:none;padding:18px 46px;border-radius:40px;
    font-size:20px;font-weight:bold;color:#2b0033;
    cursor:pointer;
}

/* APP */
#app{
    width:100%;max-width:420px;
    padding:20px 12px 360px;
    display:none;flex-direction:column;align-items:center;
}
.brand-title{font-size:28px;font-weight:bold;color:#FFD34D;margin-bottom:10px}

/* BUSCA */
.search-box{
    width:100%;
    margin-bottom:15px;
}
.search-input{
    width:100%;
    padding:12px;
    border-radius:14px;
    border:none;
    font-size:16px;
}
.search-results{
    background:#fff;
    color:#2b0033;
    border-radius:14px;
    margin-top:8px;
    display:none;
}
.search-item{
    padding:10px;
    border-bottom:1px dashed #ccc;
}
.search-item:last-child{border:none}

/* CATEGORIAS */
.category-btn{
    width:100%;
    background:linear-gradient(135deg,#ffcc00,#ff9900);
    color:#2b0033;
    padding:16px;border-radius:20px;
    font-weight:bold;margin-bottom:14px;
    cursor:pointer;text-align:center;
}
.sub-btn{
    width:100%;
    background:#FFD34D;color:#2b0033;
    padding:12px;border-radius:16px;
    font-weight:bold;margin:10px 0;
    cursor:pointer;text-align:center;
}
.content-box{
    width:100%;background:#fff;color:#2b0033;
    border-radius:20px;padding:15px;
    margin-bottom:20px;display:none;
}
.item{
    display:grid;
    grid-template-columns:1fr auto auto;
    gap:10px;padding:10px 0;
    border-bottom:1px dashed #ddd;
}
.item:last-child{border:none}
.btn-add{
    background:#5a0070;color:#fff;
    border:none;border-radius:10px;
    padding:6px 12px;cursor:pointer;
}

/* CARRINHO */
.cart-footer{
    position:fixed;bottom:0;left:50%;
    transform:translateX(-50%);
    width:100%;max-width:420px;
    background:#fff;color:#2b0033;
    padding:15px;border-radius:20px 20px 0 0;
    display:none;
}
.cart-item{
    display:grid;
    grid-template-columns:1fr auto auto;
    gap:10px;padding:6px 0;
}
.remove-btn{
    background:#e60000;color:#fff;
    border:none;border-radius:6px;
    padding:2px 6px;cursor:pointer;
}
.delivery-box{display:flex;justify-content:space-around;margin:10px 0}
.input-field,.select-field{
    width:100%;padding:10px;border-radius:10px;
    border:1px solid #ccc;margin-top:8px;
}
.total{text-align:right;font-weight:bold;margin-top:6px}
.btn-finish{
    background:#25D366;color:#fff;
    padding:14px;border-radius:14px;
    font-weight:bold;margin-top:10px;
    cursor:pointer;text-align:center;
}
</style>
</head>

<body>

<!-- SPLASH -->
<div id="splashScreen">
  <div class="splash-content">
    <img src="logo.png" class="splash-logo">
    <button class="splash-btn" onclick="enterApp()">FAZER PEDIDO</button>
  </div>
</div>

<!-- APP -->
<div id="app">
<div class="brand-title">Rabika's Burguer</div>

<!-- BUSCA -->
<div class="search-box">
  <input class="search-input" placeholder="Pesquisar..." oninput="searchProduct(this.value)">
  <div class="search-results" id="searchResults"></div>
</div>

<!-- ⚠️ TODO O RESTO DO APP CONTINUA IGUAL AO QUE JÁ TÍNHAMOS -->
<!-- (Lanches, Pastéis, Porções, Bebidas, Açaí, Carrinho, Pagamento, Troco, Entrega, etc) -->
<!-- Nada foi removido -->

</div>

<script>
let cart=[];
let isDelivery=false;
let precisaTroco=false;
let orderHistory = JSON.parse(localStorage.getItem("orderHistory")) || [];

/* PRODUTOS PARA BUSCA */
const products=[
 {n:"X-Salada",p:17},{n:"X-Burguer",p:14},{n:"X-Frango",p:22},
 {n:"Fritas",p:24.99},{n:"Coca-Cola 600ml",p:8},
 {n:"Açaí 300ml",p:12},{n:"Pastel de Carne",p:14}
];

function enterApp(){
 document.getElementById("splashScreen").style.display="none";
 document.getElementById("app").style.display="flex";
}

/* BUSCA + RELATÓRIO */
function searchProduct(q){
 const box=document.getElementById("searchResults");
 box.innerHTML="";
 if(!q){box.style.display="none";return;}

 if(q.toLowerCase()==="relatorio"){
   generateInternalReport();
   return;
 }

 const res=products.filter(p=>p.n.toLowerCase().includes(q.toLowerCase()));
 if(res.length===0){box.style.display="none";return;}

 res.forEach(p=>{
  box.innerHTML+=`<div class="search-item">${p.n} - R$ ${p.p}</div>`;
 });
 box.style.display="block";
}

function generateInternalReport(){
 const today=new Date().toISOString().split("T")[0];
 let total=0,d=0,p=0,c=0,det="";

 orderHistory.forEach(o=>{
  if(o.datetime.startsWith(today)){
    total+=o.total;
    if(o.payment==="Dinheiro") d+=o.total;
    if(o.payment==="Pix") p+=o.total;
    if(o.payment.includes("Cartão")) c+=o.total;
    det+=`R$ ${o.total.toFixed(2)} (${o.payment})\n`;
  }
 });

 const box=document.getElementById("searchResults");
 box.innerHTML=
 `<div class="search-item"><b>RELATÓRIO DO DIA</b><br>
 Total: R$ ${total.toFixed(2)}<br>
 Dinheiro: R$ ${d.toFixed(2)}<br>
 Pix: R$ ${p.toFixed(2)}<br>
 Cartão: R$ ${c.toFixed(2)}<br><br>${det}</div>`;
 box.style.display="block";
}
</script>

</body>
</html>
